# 组件翻译整理计划

根据我们的多语言翻译方案，需要对项目中的组件和页面进行分类和整理，明确哪些使用公共翻译文件，哪些采用私有化翻译管理。

## 组件分类

### 共享组件（使用公共翻译文件）

这些组件在多个页面中复用，应使用公共翻译文件：

1. **布局组件**：
   - `Header.tsx` - 网站头部，包含导航和搜索
   - `Footer.tsx` - 网站页脚，包含版权和链接
   - `Navigation.tsx` - 导航菜单
   - `LanguageSwitcher.tsx` - 语言切换器
   - `LocaleLink.tsx` - 本地化链接组件

2. **通用UI组件**：
   - 目前项目中尚未抽象出通用UI组件，未来可以考虑Button、Alert等

### 私有组件（内部管理翻译）

这些组件是特定业务或页面专用，应采用私有化翻译管理：

1. **特定业务组件**：
   - `GamesList.tsx` - 游戏列表组件，包含大量游戏特定文本
   - `games.tsx` - 游戏相关组件

2. **页面特定组件**：
   - `HomeContent.tsx` - 首页内容组件
   - `AboutContent.tsx` - 关于页面内容组件
   - `ProductsContent.tsx` - 产品页面内容组件

## 整理计划

### 第一阶段：共享组件整理

1. **Header.tsx**
   - 当前状态：使用getTranslation从公共翻译文件获取文本
   - 整理方案：保持现状，确保所有文本都有对应翻译键

2. **Footer.tsx**
   - 当前状态：使用getTranslation从公共翻译文件获取文本
   - 整理方案：保持现状，确保所有文本都有对应翻译键

3. **Navigation.tsx**
   - 当前状态：已修改为使用getTranslation
   - 整理方案：保持现状，确保所有文本都有对应翻译键

4. **LanguageSwitcher.tsx**
   - 当前状态：使用localeNames对象获取语言名称
   - 整理方案：保持现状，这是一个合理的实现

5. **LocaleLink.tsx**
   - 当前状态：纯功能组件，无需翻译文本
   - 整理方案：保持现状

### 第二阶段：私有组件改造

1. **GamesList.tsx**
   - 当前状态：混合使用硬编码翻译和getLocalizedText函数
   - 整理方案：
     - 将硬编码的翻译移至组件内的translations对象
     - 修改getLocalizedText的使用，改为直接从translations获取

2. **games.tsx**
   - 当前状态：可能包含硬编码文本
   - 整理方案：
     - 创建组件内的translations对象
     - 替换所有硬编码文本

3. **HomeContent.tsx**
   - 当前状态：使用getTranslation从公共翻译文件获取文本
   - 整理方案：
     - 创建组件内的translations对象
     - 不再依赖公共翻译文件

4. **AboutContent.tsx**
   - 当前状态：可能使用公共翻译或硬编码文本
   - 整理方案：
     - 创建组件内的translations对象
     - 替换所有硬编码文本或公共翻译引用

5. **ProductsContent.tsx**
   - 当前状态：可能使用公共翻译或硬编码文本
   - 整理方案：
     - 创建组件内的translations对象
     - 替换所有硬编码文本或公共翻译引用

### 第三阶段：页面整理

1. **src/app/[locale]/page.tsx**
   - 当前状态：主页，使用HomeContent组件
   - 整理方案：确保正确传递locale参数给HomeContent

2. **src/app/[locale]/play/page.tsx**
   - 当前状态：游戏播放页面
   - 整理方案：
     - 检查是否包含硬编码文本
     - 创建页面特定的translations对象

3. **src/app/[locale]/games/page.tsx**
   - 当前状态：游戏列表页面
   - 整理方案：
     - 检查是否包含硬编码文本
     - 创建页面特定的translations对象

4. **src/app/[locale]/about/page.tsx**
   - 当前状态：关于页面
   - 整理方案：确保正确传递locale参数给AboutContent

5. **src/app/[locale]/products/page.tsx**
   - 当前状态：产品页面
   - 整理方案：确保正确传递locale参数给ProductsContent

## 具体改造示例

### 示例1：改造GamesList.tsx

```tsx
'use client';

import { useState, useEffect } from 'react';
import { Game, Category, GamesData } from '@/types/games';
import Link from 'next/link';
import Image from 'next/image';
import { useParams } from 'next/navigation';
import { Locale, defaultLocale } from '@/app/config/i18n';

// 私有组件翻译
const translations = {
  en: {
    searchResults: '🔍 Search Results',
    foundGames: (count: number) => `Found ${count} games`,
    loading: 'Loading games...',
    error: 'Error loading games:',
    noGames: 'No games found'
  },
  zh: {
    searchResults: '🔍 搜索结果',
    foundGames: (count: number) => `找到 ${count} 个游戏`,
    loading: '正在加载游戏...',
    error: '加载游戏时出错：',
    noGames: '未找到游戏'
  },
  es: {
    searchResults: '🔍 Resultados de búsqueda',
    foundGames: (count: number) => `${count} juegos encontrados`,
    loading: 'Cargando juegos...',
    error: 'Error al cargar juegos:',
    noGames: 'No se encontraron juegos'
  },
  fr: {
    searchResults: '🔍 Résultats de recherche',
    foundGames: (count: number) => `${count} jeux trouvés`,
    loading: 'Chargement des jeux...',
    error: 'Erreur lors du chargement des jeux:',
    noGames: 'Aucun jeu trouvé'
  }
};

// 组件实现...
```

### 示例2：改造HomeContent.tsx

```tsx
'use client'

import { Locale } from '@/app/config/i18n'
import { useState, useEffect } from 'react'

// 私有组件翻译
const translations = {
  en: {
    title: 'Welcome to our multilingual website',
    description: 'This is a multilingual website built with Next.js'
  },
  zh: {
    title: '欢迎访问我们的多语言网站',
    description: '这是一个使用Next.js构建的多语言网站'
  },
  es: {
    title: 'Bienvenido a nuestro sitio web multilingüe',
    description: 'Este es un sitio web multilingüe construido con Next.js'
  },
  fr: {
    title: 'Bienvenue sur notre site Web multilingue',
    description: 'Ceci est un site Web multilingue construit avec Next.js'
  }
};

/**
 * 首页内容组件 - 纯客户端组件，使用useEffect避免水合问题
 */
export function HomeContent({ locale }: { locale: Locale }) {
  // 使用当前语言的翻译，如果不存在则使用英文
  const t = translations[locale] || translations.en;
  
  // 使用useState存储标题和描述
  const [title, setTitle] = useState('');
  const [description, setDescription] = useState('');

  // 在客户端渲染后设置内容
  useEffect(() => {
    setTitle(t.title);
    setDescription(t.description);
  }, [locale]);

  return (
    <div>
      <h1>{title}</h1>
      <p>{description}</p>
    </div>
  )
}
```

## 时间安排

1. **第一阶段（共享组件整理）**：2天
   - 审查所有共享组件的翻译使用情况
   - 确保翻译键的一致性和完整性

2. **第二阶段（私有组件改造）**：3天
   - 每天改造1-2个组件
   - 编写组件内的translations对象
   - 测试改造后的组件

3. **第三阶段（页面整理）**：2天
   - 审查所有页面的翻译使用情况
   - 确保正确传递locale参数
   - 创建页面特定的translations对象

4. **测试与验证**：1天
   - 全面测试所有语言版本
   - 确保没有遗漏的翻译
   - 验证水合问题是否解决 